{% extends 'tickets/dashboard_base.html' %}
{% block title %}Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ± IT{% endblock %}
{% block content %}
{{ block.super }}

<!-- Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø§Ø² Ú©Ø§Ø±Ø¨Ø± -->
<div class="card p-3 shadow-sm mt-4">
    <h5 class="fw-bold mb-3 text-primary">ðŸ“¥ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ (Ú©Ø§Ø±Ø¨Ø±)</h5>
    {% include 'tickets/_manager_table.html' with tickets=new_from_user experts=experts %}
</div>

<!-- Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ú¯Ø´ØªÛŒ Ø§Ø² Ú©Ø§Ø±Ø´Ù†Ø§Ø³ -->
<div class="card p-3 shadow-sm mt-4">
    <h5 class="fw-bold mb-3 text-warning">â†© Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ú¯Ø´ØªÛŒ Ø§Ø² Ú©Ø§Ø±Ø´Ù†Ø§Ø³</h5>
    {% include 'tickets/_manager_table.html' with tickets=returned_from_expert experts=experts %}
</div>

<!-- Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù… -->
<div class="card p-3 shadow-sm mt-4">
    <h5 class="fw-bold mb-3">ðŸ”„ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…</h5>
    {% include 'tickets/_manager_table.html' with tickets=in_progress experts=experts %}
</div>

<!-- Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡ -->
<div class="card p-3 shadow-sm mt-4">
    <h5 class="fw-bold mb-3 text-success">âœ… Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ ØªÙ…Ø§Ù…â€ŒØ´Ø¯Ù‡</h5>
    {% include 'tickets/_manager_table.html' with tickets=done_tickets experts=experts %}
</div>


<script>
function refreshManagerTables(){
    fetch("{% url 'manager_dashboard_table' %}")
    .then(response => response.json())
    .then(data => {
        document.getElementById("active-tickets-table").innerHTML = data.html_active;
        document.getElementById("done-tickets-table").innerHTML = data.html_done;
    });
}
setInterval(refreshManagerTables, 60000);
</script>
{% endblock %}